<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criptograf√≠a y Blockchain | Simulaci√≥n Interactiva</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Roboto+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <header class="main-header">
            <div class="logo">
                <span class="icon">üîó</span>
                <h1>Crypto<span class="highlight">Learn</span></h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#hashing" class="active">Hashing</a></li>
                    <li><a href="#blockchain">Blockchain</a></li>
                    <li><a href="#signatures">Firmas</a></li>
                    <li><a href="#network-simulator">Red P2P</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <!-- Secci√≥n 1: Hashing en Tiempo Real -->
            <section id="hashing" class="section active">
                <div class="section-header">
                    <h2>Hashing en <span class="gradient-text">Tiempo Real</span></h2>
                    <p>La huella digital √∫nica de cualquier dato.</p>
                </div>

                <div class="sim-dashboard-container">
                    <div class="cyber-card full-width" id="module-hashing">
                        <div class="module-content">
                            <div class="input-group">
                                <label>Datos de Entrada</label>
                                <textarea id="hash-input"
                                    placeholder="Escribe algo aqu√≠ para ver c√≥mo cambia su hash..."></textarea>
                            </div>

                            <div class="hash-arrow-container">
                                <div class="arrow-down">SHA-256</div>
                            </div>

                            <div class="output-group">
                                <label>Hash Resultante</label>
                                <div id="hash-output" class="code-display">...</div>
                            </div>

                            <div class="avalanche-container">
                                <div class="avalanche-header">
                                    <label>Efecto Avalancha (Bits Cambiados)</label>
                                    <span class="stats-badge"><span id="changed-bits-count">0</span> bits</span>
                                </div>
                                <div id="bits-grid" class="bits-grid"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Secci√≥n 2: Blockchain -->
            <section id="blockchain" class="section">
                <div class="section-header">
                    <h2>Cadena de <span class="gradient-text">Bloques</span></h2>
                    <p>Un registro inmutable y distribuido.</p>
                </div>

                <div class="sim-dashboard-container">
                    <div class="cyber-card full-width" id="module-blockchain">
                        <div class="module-header-controls">
                            <h3>Blockchain Local</h3>
                            <button id="btn-reset-chain" class="btn-cyber-ghost small">
                                <span class="icon">üîÑ</span> Reiniciar
                            </button>
                        </div>
                        <div class="blockchain-scroll-container">
                            <div class="blockchain-track" id="blockchain-track">
                                <!-- Blocks generated by JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Secci√≥n 3: Firmas Digitales (Interactivo) -->
            <section id="signatures" class="section">
                <div class="section-header">
                    <h2>Firmas <span class="gradient-text">Digitales</span></h2>
                    <p>Simulador de Integridad: El Ataque Man-in-the-Middle</p>
                </div>

                <div class="sim-dashboard-container">
                    <div class="signatures-grid">

                        <!-- Columna 1: Alice (Emisor) -->
                        <div class="cyber-card" id="sig-col-alice">
                            <div class="card-avatar-container">
                                <div class="cyber-avatar">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                </div>
                                <h3>Alice (Emisor)</h3>
                            </div>

                            <div class="cyber-input-group">
                                <label>Mensaje Original</label>
                                <textarea id="sig-alice-msg" class="cyber-textarea"
                                    rows="3">Transferir $1000 a Bob</textarea>
                            </div>

                            <div class="cyber-input-group">
                                <label>Clave Privada (Secreta)</label>
                                <div class="cyber-input-value dots">e9873d79c6d87dc0fb6a...</div>
                            </div>

                            <button id="btn-sig-sign" class="btn-cyber-green full-width">
                                <span class="icon">‚úçÔ∏è</span> Firmar y Enviar
                            </button>

                            <div id="alice-status" class="status-text hidden">Firmado y Enviado ‚ûî</div>
                        </div>

                        <!-- Columna 2: La Red (Interceptor) -->
                        <div class="network-transit-zone" id="sig-col-network">
                            <div class="network-label">LA RED (Insegura)</div>

                            <!-- El paquete viajar√° aqu√≠ -->
                            <div id="sig-packet-container" class="packet-container hidden">
                                <div class="packet-card" id="sig-packet">
                                    <div class="packet-icon">‚úâÔ∏è</div>
                                    <div class="packet-data" id="sig-packet-data">Transferir $1000 a Bob</div>
                                    <div class="packet-seal">üèµÔ∏è Sello Digital</div>
                                </div>

                                <div class="interceptor-controls">
                                    <button id="btn-sig-tamper" class="btn-cyber-red small">
                                        <span class="icon">üïµÔ∏è</span> Interceptar
                                    </button>
                                </div>
                            </div>

                            <!-- Modal de Hackeo (Inline) -->
                            <div id="tamper-modal" class="tamper-modal hidden">
                                <h4>‚ö†Ô∏è Interceptando Paquete</h4>
                                <p>Puedes modificar el mensaje, pero <strong>NO</strong> puedes generar una nueva firma
                                    v√°lida (no tienes la clave privada).</p>
                                <textarea id="tamper-msg-input" class="cyber-textarea red-border"></textarea>
                                <button id="btn-tamper-apply" class="btn-cyber-red full-width">Modificar y
                                    Reenviar</button>
                            </div>
                        </div>

                        <!-- Columna 3: Bob (Receptor) -->
                        <div class="cyber-card" id="sig-col-bob">
                            <div class="card-avatar-container">
                                <div class="cyber-avatar miner">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
                                        <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
                                        <line x1="6" y1="6" x2="6.01" y2="6"></line>
                                        <line x1="6" y1="18" x2="6.01" y2="18"></line>
                                    </svg>
                                </div>
                                <h3>Bob (Receptor)</h3>
                            </div>

                            <div class="cyber-input-group">
                                <label>Mensaje Recibido</label>
                                <div id="bob-received-msg" class="cyber-input-value empty">Esperando...</div>
                            </div>

                            <div class="cyber-input-group">
                                <label>Clave P√∫blica de Alice</label>
                                <div class="cyber-input-value code-green">0x4F3a...9B1</div>
                            </div>

                            <button id="btn-sig-verify" class="btn-cyber-ghost full-width" disabled>
                                <span class="icon">üîç</span> Verificar Firma
                            </button>

                            <!-- Resultado de Verificaci√≥n -->
                            <div id="bob-verification-result" class="verification-result hidden">
                                <div class="comparison-row">
                                    <div class="comp-box">
                                        <span class="label">Hash del Mensaje</span>
                                        <span class="value" id="bob-hash-msg">...</span>
                                    </div>
                                    <div class="comp-operator">vs</div>
                                    <div class="comp-box">
                                        <span class="label">Hash de la Firma</span>
                                        <span class="value" id="bob-hash-sig">...</span>
                                    </div>
                                </div>
                                <div id="final-result-badge" class="result-badge"></div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <!-- Secci√≥n 4: Red P2P (Existing) -->
            <section id="network-simulator" class="section">
                <!-- Header removed as per previous design, just the dashboard -->
                <div class="sim-dashboard-container">
                    <!-- Top Controls Bar -->
                    <div class="sim-controls-bar">
                        <div class="left-controls">
                            <button id="btn-tx-valid" class="btn-cyber-green">
                                <span class="icon-check">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="20 6 9 17 4 12"></polyline>
                                    </svg>
                                </span>
                                Transacci√≥n V√°lida
                            </button>
                            <button id="btn-tx-invalid" class="btn-cyber-red">
                                <span class="icon-x">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                    </svg>
                                </span>
                                Transacci√≥n Inv√°lida (Tampered)
                            </button>
                        </div>
                        <div class="right-controls">
                            <button id="btn-sim-reset" class="btn-cyber-ghost">
                                <span class="icon-refresh">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M23 4v6h-6"></path>
                                        <path d="M1 20v-6h6"></path>
                                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15">
                                        </path>
                                    </svg>
                                </span>
                                Reset
                            </button>
                        </div>
                    </div>

                    <!-- Main Workspace -->
                    <div class="sim-workspace-grid">
                        <!-- Alice Panel -->
                        <div class="cyber-card" id="panel-alice">
                            <div class="card-avatar-container">
                                <div class="cyber-avatar">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                </div>
                                <h3>Alice (Sender)</h3>
                            </div>

                            <div class="cyber-input-group">
                                <label>Llave Privada:</label>
                                <div class="cyber-input-value dots">********************</div>
                            </div>

                            <div class="cyber-input-group">
                                <label>Llave P√∫blica:</label>
                                <div class="cyber-input-value code-green">0x4F3a...9B1</div>
                            </div>

                            <!-- Hidden TX Data Section -->
                            <div id="alice-tx-data" class="cyber-input-group hidden-section">
                                <label>Datos TX:</label>
                                <div class="cyber-input-value code-white">Enviar 10 BTC a Bob</div>
                            </div>
                        </div>

                        <!-- Network Space (Grid Background) -->
                        <div class="network-grid-space" id="network-space">
                            <!-- Packets will be injected here -->
                        </div>

                        <!-- Miner Panel -->
                        <div class="cyber-card" id="panel-miner">
                            <div class="card-avatar-container">
                                <div class="cyber-avatar miner">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
                                        <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
                                        <line x1="6" y1="6" x2="6.01" y2="6"></line>
                                        <line x1="6" y1="18" x2="6.01" y2="18"></line>
                                    </svg>
                                </div>
                                <h3>Nodo Minero</h3>
                            </div>

                            <!-- Verification Section (Hidden by default) -->
                            <div id="miner-verification" class="verification-section hidden-section">
                                <div class="verif-header">VERIFICACI√ìN</div>
                                <div class="verif-step">
                                    <span class="step-label">1. Calc. Hash (Datos):</span>
                                    <span class="step-value yellow" id="verif-hash">...</span>
                                </div>
                                <div class="verif-step">
                                    <span class="step-label">2. Descifrar Firma (PubKey):</span>
                                    <span class="step-value green" id="verif-sig">...</span>
                                </div>
                                <button class="btn-verif-waiting" id="btn-verif-status">
                                    ESPERANDO...
                                </button>
                            </div>

                            <div class="miner-spacer"></div>

                            <div class="blockchain-section">
                                <div class="section-label">BLOCKCHAIN</div>
                                <div id="mini-chain" class="mini-chain-container">
                                    <div class="mini-block-item genesis">
                                        <div class="block-title">Block #0 (Genesis)</div>
                                        <div class="block-hash">Hash: 0000abc...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- System Console -->
                    <div class="system-console">
                        <div id="console-output" class="console-lines">
                            <div class="console-line">System ready. Select a simulation mode above.</div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>Desarrollado para educaci√≥n en Criptograf√≠a y Blockchain</p>
        </footer>
    </div>
    <script src="script.js"></script>
</body>

</html>